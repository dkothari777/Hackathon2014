<!DOCTYPE html>
<html>
	<head>
		<title> Java Fiddle </title> 
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<link href="style.css" type="text/css" rel="stylesheet">
	</head>
	<body>
		<!-- BEGIN HEADER -->
		<header> 
			<h1> Java Fiddle  </h1>
		</header>
		<!-- END HEADER -->


<pre id="editor">public class newProgram {

	public static void main (String [] args){

	}

}</pre>

		<div id="Output">
			<p id="OutputContent">
			
			</p>
		</div>
		<input type="button" id="compile" value="Compile" onClick="writeConsole()" \>
		
		<input type="button" id="cancel" value="Cancel" onClick="clearConsole()"\>
		
		<script src="../static/ace.js" type="text/javascript" charset="utf-8"></script>
		<script>
			var editor = ace.edit("editor");
			editor.setTheme("ace/theme/github");
			editor.getSession().setMode("ace/mode/java");
		</script>
		<script>
			function writeConsole(e) {
				var code = editor.getValue();
				//document.getElementById('OutputContent').innerHTML = code; 
				send();
				e.preventDefault();
				return false;
			}
		</script>
		<script>
			function clearConsole(e) {
				document.getElementById('OutputContent').innerHTML = "";
				e.preventDefault();
				return false;
			}
		</script>
		<script src="http://code.jquery.com/jquery-1.11.0.min.js">
			$(document).ready(function() {
 
			if(!("WebSocket" in window)){
				$('<p>Oh no, you need a browser that supports WebSockets. How about <a href="http://www.google.com/chrome">Google Chrome</a>?</p>').appendTo('#container');
			}else{
			//The user has WebSockets
			
				connect();
		 
				function connect(){
					var socket;
					var host = "ws://localhost:8080/java";
			 
					try{
						var socket = new WebSocket(host);
			 
						message('<p class="event">Socket Status: '+socket.readyState);
			 
						socket.onopen = function(){
							message('<p class="event">Socket Status: '+socket.readyState+' (open)');
						}
			 
						socket.onmessage = function(msg){
							message('<p class="message">Received: '+msg.data);
						}
			 
						socket.onclose = function(){
							message('<p class="event">Socket Status: '+socket.readyState+' (Closed)');
						}         
			 
					} catch(exception){
						message('<p>Error'+exception);
					}
			 
					function send(){
						var text = editor.getValue();
			 
						if(text==""){
							message('<p class="warning">Please enter a message');
							return ;
						}
						try{
							socket.send(text);
							message('<p class="event">Sent: '+text)
			 
						} catch(exception){
							message('<p class="warning">');
						}
						$('#text').val("");
					}
			 
					function message(msg){
						$('#chatLog').append(msg+'</p>');
					}
			 
					$('#text').keypress(function(event) {
						if (event.keyCode == '13') {
							send();
						}
					});   
			 
					$('#disconnect').click(function(){
						socket.close();
					});
			 
				}//End connect
		 
			}//End else
		 
		});
		</script>
		<footer>
			<p>
				<a href="https://github.com/dkothari777/Hackathon2014">Java Fiddle GitHub</a> 
			</p>
		</footer>
	</body>

</html>
